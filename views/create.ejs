<%- include("_header") -%>

<form enctype="multipart/form-data" action="/formPost" method="POST" onsubmit="return validateForm();">
    <p>
        <div>
            <label for="id">ID:</label>
            <input type="number" id="id" name="id" pattern="\d+" value="<%= data.id %>" required>
            <span>(required)</span>
        </div>              
    </p>
    <p>
        <div>
            <label for="fName">First Name:</label>
            <input type="text" id="fName" name="fName" pattern="(?i)[a-z]+" value="<%= data.fName %>" required>
            <span>(required)</span>
        </div>  
    </p>
    <p>
        <div>
            <label for="lName">Last Name:</label>
            <input type="text" id="lName" name="lName" pattern="(?i)[a-z]+" value="<%= data.lName %>" required>
            <span>(required)</span>
        </div>  
    </p>
    <p>
        <div>
            <label for="state">State:</label>
            <input type="text" name="state" id="state" maxlength="2" pattern="[A-Za-z]{2}" value="<%= data.state %>">
        </div>  
    </p>
    <p>
        <div>
            <label for="salesYtd">Sales YTD:</label>
            <input type="number" id="salesYtd" name="salesYtd" pattern="\d+" value="<%= data.salesYtd %>">
        </div>              
    </p>
    <p>
        <div>
            <label for="previousSales">Previous Years Sales:</label>
            <input type="number" id="previousSales" name="previousSales" pattern="\d+" value="<%= data.previousSales %>">
        </div>              
    </p>
    <input type="submit" value="Submit">
    <input type="reset" value="Reset">
    <div id="notification" style="display:none;">New Customer Created!</div>
</form>
<div id="error-message"></div>
<script>
    const form = document.querySelector('form');

form.addEventListener('submit', function(event) {
  event.preventDefault();

  // Get the notification element
  const notification = document.getElementById('notification');

  // Show the notification
  notification.classList.add('show');
  notification.textContent = 'New Customer Created!';

  // Clear the form fields
  form.reset();
});
</script>
<script>
    function validateForm() {
  var id = document.getElementById("id").value;
  var fName = document.getElementById("fName").value;
  var lName = document.getElementById("lName").value;
  var errorMessage = "";

  if (id == "") {
    errorMessage += "Please enter an ID.<br>";
  }

  if (fName == "") {
    errorMessage += "Please enter a first name.<br>";
  }

  if (lName == "") {
    errorMessage += "Please enter a last name.<br>";
  }

  if (errorMessage != "") {
    document.getElementById("error-message").innerHTML = errorMessage;
    return false;
  }
  
  return true;
}
</script>
<%- include("_footer") -%>